<div class="container-fluid">
  <div class="container mt-5 pt-5">
    <button class="btn btn-primary me-2 " data-bs-toggle="modal" data-bs-target="#calculatorModal">
      Open Calculator
    </button>

    <button class="btn btn-success" (click)="openGallery()">
      Open Gallery
    </button>
  </div>

  <!-- Calculator Modal -->
  <div class="modal fade" id="calculatorModal" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content text-center p-3 bg-dark">
        <div class="calculator">
          <div class="output">{{ displayValue }}</div>
          <div class="keys">
           <!-- Top Row -->
          <button class="key light-gray" (click)="clear()">AC</button>
          <button class="key light-gray" (click)="toggleSign()">+/-</button>
          <button class="key light-gray" (click)="inputPercent()">%</button>
          <button class="key orange" [ngClass]="{ active: operator === '÷' }" (click)="handleOperator('÷')">÷</button>

          <!-- Row 2 -->
          <button class="key dark" (click)="inputDigit('7')">7</button>
          <button class="key dark" (click)="inputDigit('8')">8</button>
          <button class="key dark" (click)="inputDigit('9')">9</button>
          <button class="key orange" [ngClass]="{ active: operator === '×' }" (click)="handleOperator('×')">×</button>

          <!-- Row 3 -->
          <button class="key dark" (click)="inputDigit('4')">4</button>
          <button class="key dark" (click)="inputDigit('5')">5</button>
          <button class="key dark" (click)="inputDigit('6')">6</button>
          <button class="key orange" [ngClass]="{ active: operator === '-' }" (click)="handleOperator('-')">-</button>

          <!-- Row 4 -->
          <button class="key dark" (click)="inputDigit('1')">1</button>
          <button class="key dark" (click)="inputDigit('2')">2</button>
          <button class="key dark" (click)="inputDigit('3')">3</button>
          <button class="key orange" [ngClass]="{ active: operator === '+' }" (click)="handleOperator('+')">+</button>

          <!-- Last Row -->
          <button class="key zero dark" (click)="inputDigit('0')">0</button>
          <button class="key dark" (click)="inputDecimal('.')">.</button>
          <button class="key orange" (click)="calculate()">=</button>

          </div>
        </div>

        </div>
      </div>
    </div>


  <!-- Gallery Images -->
  <div class="row mt-4" *ngIf="showGallery">
    <div class="col-4" *ngFor="let img of images">
      <img [src]="img.src" alt="..." class="img-fluid mb-2 gallery-img" (click)="openImagePreview(img)" />
    </div>
  </div>

  <!-- Image Preview Modals -->
  <div *ngFor="let preview of imagePreviews">
    <div class="modal fade show d-block custom-modal" [id]="preview.id" tabindex="-1">
      <div class="modal-dialog modal-lg">
        <div class="modal-content p-3 position-relative">
          <img [src]="preview.src" class="img-fluid w-100" [id]="preview.id + '-container'" />
          <button class="btn btn-sm btn-primary position-absolute bottom-0 end-0 m-2" (click)="addCaption(preview.id)">Add Caption</button>
          <button class="btn-close position-absolute top-0 end-0 m-2" (click)="closePreview(preview.id)"></button>
        </div>
      </div>
    </div>
  </div>

</div>
